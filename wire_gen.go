// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"ddd-template/internal/adapters/repository"
	"ddd-template/internal/application"
	"ddd-template/internal/application/mutation"
	"ddd-template/internal/application/query"
	"ddd-template/internal/rely"
	"ddd-template/internal/service"
	"ddd-template/internal/service/controller"
	"ddd-template/internal/service/controller/handler"
	"ddd-template/internal/service/graph"
	"github.com/olongfen/toolkit/db_data"
)

// Injectors from wire.go:

func NewServer(configFile2 string) (*service.Server, func(), error) {
	configs, err := rely.InitConfigs(configFile2)
	if err != nil {
		return nil, nil, err
	}
	logger := rely.NewLogger(configs)
	db, err := rely.InitDBConnect(configs, logger)
	if err != nil {
		return nil, nil, err
	}
	dbData, cleanup := db_data.NewData(db, logger)
	iDemoRepo := repository.NewDemo(dbData)
	iDemoService := mutation.NewDemo(iDemoRepo)
	mutationMutation := mutation.SetMutation(iDemoService)
	queryIDemoService := query.NewDemo(iDemoRepo)
	queryQuery := query.SetQuery(queryIDemoService)
	application := app.NewApplication(mutationMutation, queryQuery)
	handlerHandler := handler.NewHandler(application)
	resolver := graph.NewResolver(application, logger)
	middleware := controller.NewMiddleware(logger)
	httpServer, cleanup2 := controller.NewHTTPServer(handlerHandler, resolver, middleware, configs, logger)
	server := service.NewServer(httpServer)
	return server, func() {
		cleanup2()
		cleanup()
	}, nil
}
